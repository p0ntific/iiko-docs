# Кассовая смена

## Краткое описание

Система управления кассовой сменой в iiko Front. Обеспечивает полный цикл работы с денежными средствами - от открытия смены до закрытия с формированием отчетности, включая контроль наличности, фискальные операции и сверку платежей.

## Функциональные элементы

### Основные компоненты страницы

- **Статус смены** - текущее состояние кассовой смены
- **Денежный ящик** - управление наличными средствами
- **Фискальные операции** - работа с фискальным регистратором
- **Сводка по платежам** - статистика по способам оплаты
- **Контроль операций** - мониторинг кассовых транзакций
- **Отчеты смены** - формирование и печать отчетов

### Функциональность

- Управление наличными средствами в кассе
- Контроль фискальных операций и отчетности
- Мониторинг платежей по способам оплаты
- Формирование X и Z отчетов
- Интеграция с банковскими системами
- Система безопасности и контроля

## Связи с другими страницами

### Входящие переходы

- **[Открытие смены](./shift-open.md)** → автоматическое открытие кассовой смены
- **[Окно расчета](./payment-window.md)** → все платежные операции
- **[Дополнительное меню](./additional-menu.md)** → кассовые операции
- **Системные процессы** → автоматические операции

### Исходящие переходы

- **Закрытие смены** → [Закрытие смены](./shift-close.md)
- **Отчеты** → [Отчеты](./reports.md) по кассовым операциям
- **Возвраты** → [Возврат товара](./product-return.md)
- **Коррекции** → [Чек коррекции](./correction-receipt.md)

### Контекстные переходы

- **Расхождения** → Анализ и устранение ошибок
- **Технические проблемы** → Диагностика оборудования
- **Подозрительные операции** → Система безопасности

## Бизнес-правила

### Жизненный цикл смены

- **Открытие смены** - авторизация кассира и инициализация оборудования
- **Работа смены** - прием платежей и контроль операций
- **Закрытие смены** - подсчет итогов и формирование отчетности

### Контроль денежных средств

- **Автоматический подсчет** оборота по безналичным платежам
- **Ручной контроль** наличных средств в кассе
- **Сверка остатков** с учетными данными
- **Выявление расхождений** и их анализ

### Фискальные требования

- **Соблюдение 54-ФЗ** - российского законодательства о ККТ
- **Обязательная фискализация** всех продаж
- **Контроль целостности** фискальных данных
- **Передача в ОФД** - оператору фискальных данных

### Состояния смены

- **Закрыта** - смена не открыта, касса неактивна
- **Открыта** - активная смена, прием платежей
- **Приостановлена** - временная блокировка операций
- **Закрывается** - процесс завершения смены
- **Требует сверки** - необходима проверка расхождений

## UX/UI требования

### Визуальные состояния

- **Обычное состояние** - отображение текущего статуса смены
- **Состояние операций** - проведение платежей и расчетов
- **Состояние сверки** - проверка наличности и отчетов
- **Состояние закрытия** - завершение смены и архивирование

### Анимации

- Плавные переходы между состояниями смены
- Анимация счетчиков и сумм
- Fade-in для уведомлений о статусе
- Пульсация при критических операциях

### Адаптивность

- Оптимизация для сенсорных экранов касс
- Крупные кнопки для быстрого доступа
- Четкие контрасты для читаемости
- Поддержка различных размеров экранов

## Различия по ролям

### Кассир

- Полный доступ к кассовым операциям
- Управление наличностью и фискальными операциями
- Формирование отчетов по смене

### Менеджер

- Просмотр статистики по всем кассам
- Доступ к аналитике и отчетности
- Управление настройками безопасности

### Администратор

- Системные настройки касс
- Конфигурация фискальных регистраторов
- Управление пользователями и правами

## Критерии готовности

- [ ] Статус смены корректно отображается в реальном времени
- [ ] Управление наличностью работает без ошибок
- [ ] Фискальные операции проводятся корректно
- [ ] X и Z отчеты формируются правильно
- [ ] Интеграция с банковскими системами стабильна
- [ ] Система безопасности выявляет подозрительные операции
- [ ] Контроль расхождений работает эффективно

## Оценка сложности

**Высокая сложность** - комплексная система управления кассой с фискальными требованиями и множественными интеграциями.
